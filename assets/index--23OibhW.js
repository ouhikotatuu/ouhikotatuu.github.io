import{d as h,u as d,r as _,o as u,a as i,b as r,c as f,e as g,f as a,g as y,w as m,h as x,i as w,p as S,j as k,_ as v}from"./index-NryTudNL.js";const l=s=>(S("data-v-518728b8"),s=s(),k(),s),b={class:"login-container"},C={class:"content"},I=l(()=>a("div",{class:"login_title"},"辰宿供应链管理平台",-1)),N=l(()=>a("div",{class:"Var"},[a("div",{class:"copyright-pc copyright"},[a("a",{href:"http://www.hsd.eco/",target:"_blank",style:{color:"#93a4b0"}},"沪ICP  备17044574号-1  Copyright  @2022 版权所有：源网荷储新能源科技（上海）有限公司")])],-1)),A=h({__name:"index",setup(s){d(),_({code:null,state:null});const p=async()=>{const o=window.location.href.split("#")[0];r.get(`https://chenxiu.app.ywhcxny.cn/oauth2/authorize?redirectUri=${o}`).then(t=>{alert(t.data.authorizeUri),window.location.replace(t.data.authorizeUri)})};return u(async()=>{var n;localStorage.getItem("xAuthToken")&&i.replace("/home");const o=(n=window.location.href.split("#")[0].split("?")[1])==null?void 0:n.split("&"),t={};Array.from(o).forEach(e=>{const c=e.split("=");t[c[0]]=c[1]}),alert(JSON.stringify(o)),alert(JSON.stringify(t)),r.post("https://chenxiu.app.ywhcxny.cn/oauth2/token",t).then(e=>{alert(JSON.stringify(e),"res"),e.data.xAuthToken&&(localStorage.setItem("xAuthToken",e.data.xAuthToken),i.replace("/home"))}).catch(e=>{alert(JSON.stringify(e),"err")})}),(o,t)=>{const n=x("a-button");return f(),g("div",b,[a("div",C,[I,y(n,{onClick:p,type:"primary",class:"loginButton"},{default:m(()=>[w("授权登录")]),_:1})]),N])}}}),B=v(A,[["__scopeId","data-v-518728b8"]]);export{B as default};
