import{u as le,e as oe}from"./exportToExcel-BUpgOtO1.js";import{d as V,a as x,r as E,p as G,b as s,c as b,q as S,w as t,g as e,l as p,e as B,v as L,t as Y,F as K,M as $,j as M,z as J,o as se,A as ue,f as P,x as Q,C as re,B as j,G as ie,_ as de}from"./index-DHTjKAgc.js";import{l as me,A as W,d as pe,u as ce}from"./merchantMange-6-FL9nMZ.js";const fe=V({__name:"MerchantMangeAdd",props:{tableData:Array},emits:["save"],setup(q,{expose:c,emit:T}){const d=x(!1),a=E({id:"",marketId:null,marketName:null,boothId:"",merchantOperatorName:"",merchantPhone:"",addTime:"",businessTypeId:null,businessStatus:null,businessLicense:"",businessPermit:"",usscId:"",merchantDetailInformation:""}),I=x(null),D={marketId:[{required:!0,message:"请输入市场名",trigger:"change"}],boothId:[{required:!0,message:"请输入摊位名",trigger:"blur"}],businessTypeId:[{required:!0,message:"请选择经营种类",trigger:"change"}],businessStatus:[{required:!0,message:"请选择营业状态",trigger:"change"}]},N=q,v=T;c({begin:()=>{var l;(l=I.value)==null||l.resetFields(),a.merchantOperatorName="",a.merchantPhone="",a.merchantDetailInformation="",G(()=>{d.value=!0})},end:()=>{d.value=!1}});const k=()=>{$.confirm({title:"确定取消",content:"是否确定取消操作？",okText:"确定",cancelText:"取消",onOk:()=>{d.value=!1}})},m=async()=>{var l;await((l=I.value)==null?void 0:l.validate()),v("save",a)};return(l,o)=>{const g=s("a-select-option"),f=s("a-select"),_=s("a-form-item"),h=s("a-input"),A=s("a-textarea"),O=s("a-form"),R=s("a-button"),u=s("a-modal");return b(),S(u,{open:d.value,"onUpdate:open":o[7]||(o[7]=r=>d.value=r),title:"商户增加"},{footer:t(()=>[e(R,{onClick:k},{default:t(()=>o[10]||(o[10]=[p("取消")])),_:1}),e(R,{type:"primary",onClick:m},{default:t(()=>o[11]||(o[11]=[p("确定")])),_:1})]),default:t(()=>[e(O,{model:a,ref_key:"formRef",ref:I,rules:D},{default:t(()=>[e(_,{label:"市场名",name:"marketId"},{default:t(()=>[e(f,{value:a.marketId,"onUpdate:value":o[0]||(o[0]=r=>a.marketId=r),placeholder:"请选择市场名"},{default:t(()=>[(b(!0),B(K,null,L(N.tableData,r=>(b(),S(g,{key:r.id,label:r.marketName,value:r.marketId},{default:t(()=>[p(Y(r.marketName),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["value"])]),_:1}),e(_,{label:"摊位名",name:"boothId"},{default:t(()=>[e(h,{value:a.boothId,"onUpdate:value":o[1]||(o[1]=r=>a.boothId=r),placeholder:"请选择摊位名"},null,8,["value"])]),_:1}),e(_,{label:"经营户姓名"},{default:t(()=>[e(h,{value:a.merchantOperatorName,"onUpdate:value":o[2]||(o[2]=r=>a.merchantOperatorName=r),placeholder:"请输入经营户姓名"},null,8,["value"])]),_:1}),e(_,{label:"手机号"},{default:t(()=>[e(h,{value:a.merchantPhone,"onUpdate:value":o[3]||(o[3]=r=>a.merchantPhone=r),placeholder:"请输入手机号"},null,8,["value"])]),_:1}),e(_,{label:"经营种类",name:"businessTypeId"},{default:t(()=>[e(f,{value:a.businessTypeId,"onUpdate:value":o[4]||(o[4]=r=>a.businessTypeId=r),placeholder:"请选择经营种类"},{default:t(()=>[(b(!0),B(K,null,L(N.tableData,r=>(b(),S(g,{key:r.id,label:r.businessTypeId,value:r.businessTypeId},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1}),e(_,{label:"营业状态",name:"businessStatus"},{default:t(()=>[e(f,{value:a.businessStatus,"onUpdate:value":o[5]||(o[5]=r=>a.businessStatus=r),placeholder:"请选择经营状态"},{default:t(()=>[e(g,{value:0},{default:t(()=>o[8]||(o[8]=[p("停业")])),_:1}),e(g,{value:1},{default:t(()=>o[9]||(o[9]=[p("营业")])),_:1})]),_:1},8,["value"])]),_:1}),e(_,{label:"详情"},{default:t(()=>[e(A,{value:a.merchantDetailInformation,"onUpdate:value":o[6]||(o[6]=r=>a.merchantDetailInformation=r)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),ve=V({__name:"MerchantMangeUpdate",props:{tableData:Array},emits:["save"],setup(q,{expose:c,emit:T}){const d=x(!1),a=E({id:"",marketId:"",marketName:"",boothId:"",merchantOperatorName:"",merchantPhone:"",addTime:"",businessTypeId:"",businessStatus:0,businessLicense:"",businessPermit:"",usscId:"",merchantDetailInformation:""}),I=x(null),D=q,N=T;c({begin:m=>{console.log(m),a.id=m.id,a.marketId=m.marketId,a.marketName=m.marketName,a.boothId=m.boothId,a.merchantOperatorName=m.merchantOperatorName,a.merchantPhone=m.merchantPhone,a.businessTypeId=m.businessTypeId,a.businessStatus=m.businessStatus,a.merchantDetailInformation=m.merchantDetailInformation,G(()=>{d.value=!0})},end:()=>{d.value=!1}});const v=()=>{$.confirm({title:"确定取消",content:"是否确定取消操作？",okText:"确定",cancelText:"取消",onOk:()=>{d.value=!1,M.success("取消成功")}})},k=async()=>{var m;await((m=I.value)==null?void 0:m.validate()),N("save",a)};return(m,l)=>{const o=s("a-select-option"),g=s("a-select"),f=s("a-form-item"),_=s("a-input"),h=s("a-textarea"),A=s("a-form"),O=s("a-button"),R=s("a-modal");return b(),S(R,{open:d.value,"onUpdate:open":l[7]||(l[7]=u=>d.value=u),title:"商户修改"},{footer:t(()=>[e(O,{onClick:v},{default:t(()=>l[10]||(l[10]=[p("取消")])),_:1}),e(O,{type:"primary",onClick:k},{default:t(()=>l[11]||(l[11]=[p("确定")])),_:1})]),default:t(()=>[e(A,{model:a,ref_key:"formRef",ref:I},{default:t(()=>[e(f,{label:"市场名"},{default:t(()=>[e(g,{value:a.marketName,"onUpdate:value":l[0]||(l[0]=u=>a.marketName=u)},{default:t(()=>[(b(!0),B(K,null,L(D.tableData,u=>(b(),S(o,{key:u.id,label:u.marketName,value:u.marketName},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1}),e(f,{label:"摊位名"},{default:t(()=>[e(_,{value:a.boothId,"onUpdate:value":l[1]||(l[1]=u=>a.boothId=u),placeholder:"请选择摊位名"},null,8,["value"])]),_:1}),e(f,{label:"经营户姓名"},{default:t(()=>[e(_,{value:a.merchantOperatorName,"onUpdate:value":l[2]||(l[2]=u=>a.merchantOperatorName=u),placeholder:"请输入经营户姓名"},null,8,["value"])]),_:1}),e(f,{label:"手机号"},{default:t(()=>[e(_,{value:a.merchantPhone,"onUpdate:value":l[3]||(l[3]=u=>a.merchantPhone=u),placeholder:"请输入手机号"},null,8,["value"])]),_:1}),e(f,{label:"经营种类"},{default:t(()=>[e(g,{value:a.businessTypeId,"onUpdate:value":l[4]||(l[4]=u=>a.businessTypeId=u)},{default:t(()=>[(b(!0),B(K,null,L(D.tableData,u=>(b(),S(o,{key:u.id,label:u.businessTypeId,value:u.businessTypeId},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1}),e(f,{label:"营业状态"},{default:t(()=>[e(g,{value:a.businessStatus,"onUpdate:value":l[5]||(l[5]=u=>a.businessStatus=u)},{default:t(()=>[e(o,{value:1},{default:t(()=>l[8]||(l[8]=[p("营业")])),_:1}),e(o,{value:0},{default:t(()=>l[9]||(l[9]=[p("停业")])),_:1})]),_:1},8,["value"])]),_:1}),e(f,{label:"详情"},{default:t(()=>[e(h,{value:a.merchantDetailInformation,"onUpdate:value":l[6]||(l[6]=u=>a.merchantDetailInformation=u)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),be=V({__name:"MerchantMangeDetail",emits:["save"],setup(q,{expose:c,emit:T}){const d=x(!1),a=E({id:"",marketId:"",marketName:"",boothId:"",merchantOperatorName:"",merchantPhone:"",businessTypeId:"",businessStatus:0,addTime:"",businessLicense:"",businessPermit:"",usscId:"",merchantDetailInformation:""}),I=x(null),D=T;c({begin:v=>{a.merchantDetailInformation=v,G(()=>{d.value=!0})},end:()=>d.value=!1});const N=()=>{D("save",a)};return(v,k)=>{const m=s("a-textarea"),l=s("a-form"),o=s("a-button"),g=s("a-modal");return b(),S(g,{open:d.value,"onUpdate:open":k[1]||(k[1]=f=>d.value=f),title:"详情"},{footer:t(()=>[e(o,{type:"primary",onClick:N},{default:t(()=>k[2]||(k[2]=[p("确定")])),_:1})]),default:t(()=>[e(l,{model:a,ref_key:"formRef",ref:I},{default:t(()=>[e(m,{value:a.merchantDetailInformation,"onUpdate:value":k[0]||(k[0]=f=>a.merchantDetailInformation=f),readonly:""},null,8,["value"])]),_:1},8,["model"])]),_:1},8,["open"])}}}),_e={class:"product_device_page"},ye={class:"table_form_view"},Ie={class:"table_action_view"},ke={class:"table_search_handler"},ge={class:"table_action_button"},xe={class:"table_title"},Te={class:"table_title_icon"},De=V({__name:"index",setup(q){const c=E({current:1,size:10,marketName:null,businessTypeId:null,businessStatus:null}),T=J([]),d=J(0),a=x(null),I=x(null),D=x(null),N=x(null);se(async()=>{await v()});const v=async()=>{const i=await me(c);T.value=i.records,d.value||(d.value=i.total||0)},k=async()=>{v()},m=()=>{c.marketName=null,c.businessTypeId=null,c.businessStatus=null,v()},l=async i=>{var n;await W(i),(n=D.value)==null||n.end(),v(),M.success("新增成功")},o=async i=>{var n;await W(i),(n=I.value)==null||n.end(),v(),M.success("修改成功")},g=async i=>{$.confirm({title:"确定删除？",content:"此操作不可撤销，请确认是否删除!!!",okText:"确认",cancelText:"取消",onOk:async()=>{const n=await pe({ids:i});(n==null?void 0:n.code)===200?(v(),M.success("删除成功")):$.info({title:"操作提示",content:"无法删除，仅可修改。",onOk(){}})},onCancel(){M.error("操作已取消")}})},f=()=>{var i;(i=N.value)==null||i.end()},_=async i=>{const{id:n,businessStatus:w}=i,H=w===1?0:1;$.confirm({title:"确定操作？",content:`确定将此条数据设置为${H===1?"营业":"停业"}吗？`,okText:"确定",cancelText:"取消",onOk:async()=>{await ce({id:n,businessStatus:H}),v(),M.success("操作成功")}})},h=[{title:"序号",customRender:({text:i,record:n,index:w})=>`${w+1}`,align:"center"},{title:"市场名",dataIndex:"marketName",align:"center"},{title:"摊位名",dataIndex:"boothId",align:"center"},{title:"经营户姓名",dataIndex:"merchantOperatorName",align:"center"},{title:"手机号",dataIndex:"merchantPhone",align:"center"},{title:"经营种类",dataIndex:"businessTypeId",align:"center"},{title:"营业状态",dataIndex:"businessStatus",align:"center"},{title:"加入时间",dataIndex:"addTime",align:"center"},{title:"详情",dataIndex:"merchantDetailInformation",align:"center"},{title:"操作",dataIndex:"action",align:"center"}],A=()=>{const i=["操作","序号"],n=[{title:"用户id",dataIndex:"userId"},{title:"用户名称",dataIndex:"userName"},{title:"用户组织",dataIndex:"userCompany"}];return[...h.filter(w=>!i.includes(w.title)),...n]},O=x([]),R=x([]),u=ue(()=>({selectedRowKeys:O.value,onChange:(i,n)=>{O.value=i,R.value=n}})),r=()=>{$.confirm({title:"确定导出选中数据吗？",content:"导出后无法修改，请确认是否导出？",okText:"确定",cancelText:"取消",onOk:()=>{oe(R.value.map((i,n)=>({...i,sn:n})),A(),"selectedData.xlsx")}})},Z=i=>{c.current=i.current,c.size=i.pageSize,v()};return(i,n)=>{const w=s("a-input"),H=s("a-form-item"),X=s("a-radio"),ee=s("a-radio-group"),te=s("a-form"),U=s("a-button"),ae=s("a-divider"),ne=s("a-table");return b(),B("div",_e,[P("div",ye,[e(te,{class:"search_form",layout:"inline",autocomplete:"off",model:a.value},{default:t(()=>[e(H,{label:"市场名"},{default:t(()=>[e(w,{placeholder:"请输入市场名",value:c.marketName,"onUpdate:value":n[0]||(n[0]=y=>c.marketName=y)},null,8,["value"])]),_:1}),e(H,{label:"经营种类"},{default:t(()=>[e(w,{placeholder:"请输入经营种类",value:c.businessTypeId,"onUpdate:value":n[1]||(n[1]=y=>c.businessTypeId=y)},null,8,["value"])]),_:1}),e(H,{label:"营业状态"},{default:t(()=>[e(ee,{value:c.businessStatus,"onUpdate:value":n[2]||(n[2]=y=>c.businessStatus=y)},{default:t(()=>[e(X,{value:"1"},{default:t(()=>n[5]||(n[5]=[p("营业")])),_:1}),e(X,{value:"0"},{default:t(()=>n[6]||(n[6]=[p("停业")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"]),P("div",Ie,[P("div",ke,[e(U,{class:"table_search_button",type:"primary",onClick:n[3]||(n[3]=y=>k())},{default:t(()=>n[7]||(n[7]=[p("查询")])),_:1}),e(U,{class:"table_search_clean_button",type:"primary",onClick:m},{default:t(()=>n[8]||(n[8]=[p("清除")])),_:1}),e(U,{class:"table_search_button",type:"primary",onClick:r},{default:t(()=>n[9]||(n[9]=[p("导出信息")])),_:1})]),P("div",ge,[e(U,{class:"table_action_add",type:"primary",onClick:n[4]||(n[4]=y=>{var C;return(C=D.value)==null?void 0:C.begin()})},{default:t(()=>n[10]||(n[10]=[p(" 增加商户 ")])),_:1})])])]),P("div",xe,[P("div",Te,[e(Q(re))]),n[11]||(n[11]=P("div",{class:"table_title_text"},"菜单名称",-1))]),e(ne,{columns:h,"data-source":T.value,pagination:Q(le)(d.value),"row-selection":u.value,rowKey:y=>y.id,onChange:Z},{bodyCell:t(({column:y,record:C})=>[y.dataIndex==="merchantDetailInformation"?(b(),S(U,{key:0,class:"no-border-button",type:"primary",ghost:"",onClick:F=>{var z;return(z=N.value)==null?void 0:z.begin(C.merchantDetailInformation)}},{default:t(()=>n[12]||(n[12]=[p("详情")])),_:2},1032,["onClick"])):j("",!0),y.dataIndex==="action"?(b(),B(K,{key:1},[e(U,{class:"no-border-button",type:"primary",ghost:"",danger:"",onClick:F=>g(C.id)},{default:t(()=>n[13]||(n[13]=[p("删除")])),_:2},1032,["onClick"]),e(ae,{type:"vertical"}),e(U,{class:"no-border-button",type:"primary",ghost:"",onClick:F=>{var z;return(z=I.value)==null?void 0:z.begin(C)}},{default:t(()=>n[14]||(n[14]=[p("修改")])),_:2},1032,["onClick"])],64)):j("",!0),y.dataIndex==="businessStatus"?(b(),S(U,{key:2,class:ie(["no-border-button",{"button-active":C.businessStatus===1,"button-inactive":C.businessStatus!==1}]),type:"primary",ghost:"",onClick:F=>_(C)},{default:t(()=>[p(Y(C.businessStatus===1?"营业":"停业"),1)]),_:2},1032,["class","onClick"])):j("",!0)]),_:1},8,["data-source","pagination","row-selection","rowKey"]),e(fe,{ref_key:"addRef",ref:D,onSave:l,tableData:T.value},null,8,["tableData"]),e(ve,{ref_key:"updateRef",ref:I,onSave:o,tableData:T.value},null,8,["tableData"]),e(be,{ref_key:"detailRef",ref:N,onSave:f},null,512)])}}}),he=de(De,[["__scopeId","data-v-d29447e9"]]);export{he as default};
