import{d as p,u as d,r as h,o as _,a as i,t as u,b as f,c as m,e as o,f as w,w as x,g,h as y,i as k,p as v,j as C,_ as I}from"./index-DWXe3opJ.js";const r=e=>(v("data-v-0d451638"),e=e(),C(),e),A={class:"login-container"},S={class:"content"},b=r(()=>o("div",{class:"login_title"},"辰宿供应链管理平台",-1)),B=r(()=>o("div",{class:"Var"},[o("div",{class:"copyright-pc copyright"},[o("a",{href:"http://www.hsd.eco/",target:"_blank",style:{color:"#93a4b0"}},"沪ICP  备17044574号-1  Copyright  @2022 版权所有：源网荷储新能源科技（上海）有限公司")])],-1)),T=p({__name:"index",setup(e){d(),h({code:null,state:null});const l=async()=>{const a=window.location.href.split("#")[0];g.get(`https://chenxiu.app.ywhcxny.cn/oauth2/authorize?redirectUri=${a}`).then(t=>{window.location.replace(t.data.authorizeUri)})};return _(async()=>{var s;localStorage.getItem("xAuthToken")&&i.replace("/home");const a=(s=window.location.href.split("#")[0].split("?")[1])==null?void 0:s.split("&"),t={};Array.from(a).forEach(c=>{const n=c.split("=");t[n[0]]=n[1]}),await u(t).then(c=>{c.xAuthToken&&(localStorage.setItem("xAuthToken",c.xAuthToken),i.replace("/home"))})}),(a,t)=>{const s=y("a-button");return f(),m("div",A,[o("div",S,[b,w(s,{onClick:l,type:"primary",class:"loginButton"},{default:x(()=>[k("授权登录")]),_:1})]),B])}}}),N=I(T,[["__scopeId","data-v-0d451638"]]);export{N as default};
