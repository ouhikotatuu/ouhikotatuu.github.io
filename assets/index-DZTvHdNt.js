import{d as k,r as _,a as f,o as N,u as M,b as v,c as T,e as B,f as I,g as a,w as o,J as V,K as S,L as j,j as d,l as P,N as D,_ as E}from"./index-DHTjKAgc.js";const F={class:"container"},J=k({__name:"index",setup(K){const m=_({id:"",userName:"",userCompany:"",password:"",newPassword:"",confirmPassword:""}),l=_({oldPassword:"",newPassword:"",confirmPassword:""}),n=f([]),b=async()=>{const t=await S();n.value=t};N(async()=>{await b()});const p=f(!1),i=f(!1);M();const y=async()=>{i.value=!0,delete n.value.marketName;try{(await D(n.value)).code===200?d.success("用户信息更新成功"):d.error("用户信息更新失败")}catch{d.error("更新失败，请重试")}finally{i.value=!1}},C=()=>{p.value=!0},U=async()=>{try{i.value=!0;const t=await j(l);console.log(l),t.code===200?d.success("密码修改成功"):d.error("密码修改失败，请重试")}catch{d.error("密码修改失败")}finally{i.value=!1,g()}},g=()=>{m.password=null,m.newPassword=null,m.confirmPassword=null};return(t,e)=>{const r=v("a-input"),u=v("a-form-item"),w=v("a-button"),c=v("a-form"),x=v("a-modal");return T(),B("div",F,[e[10]||(e[10]=I("h2",null,"用户信息",-1)),a(c,{model:m,onSubmit:V(y,["prevent"])},{default:o(()=>[a(u,{label:"用户ID"},{default:o(()=>[a(r,{value:n.value.id,"onUpdate:value":e[0]||(e[0]=s=>n.value.id=s),disabled:""},null,8,["value"])]),_:1}),a(u,{label:"用户名"},{default:o(()=>[a(r,{value:n.value.userName,"onUpdate:value":e[1]||(e[1]=s=>n.value.userName=s)},null,8,["value"])]),_:1}),a(u,{label:"用户单位"},{default:o(()=>[a(r,{value:n.value.userCompany,"onUpdate:value":e[2]||(e[2]=s=>n.value.userCompany=s)},null,8,["value"])]),_:1}),a(w,{type:"link",style:{margin:"0 auto"},htmlType:"submit",loading:i.value},{default:o(()=>e[8]||(e[8]=[P("提交保存")])),_:1},8,["loading"]),a(w,{type:"link",style:{margin:"0 auto"},onClick:C},{default:o(()=>e[9]||(e[9]=[P("修改密码")])),_:1})]),_:1},8,["model"]),a(x,{visible:p.value,"onUpdate:visible":e[6]||(e[6]=s=>p.value=s),title:"修改密码",okText:"修改密码",cancelText:"取消",onOk:U,onCancel:e[7]||(e[7]=()=>{p.value.value=!1})},{default:o(()=>[a(c,{model:l},{default:o(()=>[a(u,{label:"原密码"},{default:o(()=>[a(r,{value:l.oldPassword,"onUpdate:value":e[3]||(e[3]=s=>l.oldPassword=s)},null,8,["value"])]),_:1}),a(u,{label:"新密码"},{default:o(()=>[a(r,{value:l.newPassword,"onUpdate:value":e[4]||(e[4]=s=>l.newPassword=s)},null,8,["value"])]),_:1}),a(u,{label:"再次输入新密码"},{default:o(()=>[a(r,{value:l.confirmPassword,"onUpdate:value":e[5]||(e[5]=s=>l.confirmPassword=s)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])}}}),O=E(J,[["__scopeId","data-v-6815266b"]]);export{O as default};
