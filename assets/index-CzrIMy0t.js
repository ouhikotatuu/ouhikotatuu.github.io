import{u as Z,e as h}from"./exportToExcel-BUpgOtO1.js";import{d as H,a as f,r as O,p as S,b as d,c as U,q as z,w as a,g as t,l as _,M as $,z as A,o as ee,A as te,e as q,f as y,x as E,C as oe,j as D,B as F,_ as ae}from"./index-DHTjKAgc.js";import{l as ne,A as V,d as le}from"./productType-D4N8wgIn.js";import{h as re}from"./moment-C5S46NFB.js";const se=H({__name:"ProjectTypeEdit",emits:["save"],setup(Y,{expose:C,emit:x}){const i=f(!1),o=O({id:"",pbTypeName:"",detectProject:"",productNumber:"",timeToMarket:"",productIntroduction:""}),c=f(null),w=x;C({begin:u=>{o.id=u.id,o.pbTypeName=u.pbTypeName,o.detectProject=u.detectProject,o.productNumber=u.productNumber,o.timeToMarket=re(u.timeToMarket),o.productIntroduction=u.productIntroduction,S(()=>{i.value=!0})},end:()=>{i.value=!1}});const k=()=>{$.confirm({title:"确定取消",content:"是否确定取消操作？",okText:"确定",cancelText:"取消",onOk:()=>{i.value=!1}})},m=async()=>{var u;await((u=c.value)==null?void 0:u.validate()),w("save",o)};return(u,n)=>{const s=d("a-input"),p=d("a-form-item"),v=d("a-date-picker"),N=d("a-textarea"),b=d("a-form"),I=d("a-button"),M=d("a-modal");return U(),z(M,{open:i.value,"onUpdate:open":n[5]||(n[5]=r=>i.value=r),title:"产品类型修改"},{footer:a(()=>[t(I,{onClick:k},{default:a(()=>n[6]||(n[6]=[_("取消")])),_:1}),t(I,{type:"primary",onClick:m},{default:a(()=>n[7]||(n[7]=[_("确定")])),_:1})]),default:a(()=>[t(b,{model:o,ref_key:"formRef",ref:c},{default:a(()=>[t(p,{label:"类型名称"},{default:a(()=>[t(s,{value:o.pbTypeName,"onUpdate:value":n[0]||(n[0]=r=>o.pbTypeName=r)},null,8,["value"])]),_:1}),t(p,{label:"检测项目"},{default:a(()=>[t(s,{value:o.detectProject,"onUpdate:value":n[1]||(n[1]=r=>o.detectProject=r)},null,8,["value"])]),_:1}),t(p,{label:"货号"},{default:a(()=>[t(s,{value:o.productNumber,"onUpdate:value":n[2]||(n[2]=r=>o.productNumber=r)},null,8,["value"])]),_:1}),t(p,{label:"上市时间"},{default:a(()=>[t(v,{style:{width:"380px"},type:"date",value:o.timeToMarket,"onUpdate:value":n[3]||(n[3]=r=>o.timeToMarket=r)},null,8,["value"])]),_:1}),t(p,{label:"产品简介"},{default:a(()=>[t(N,{value:o.productIntroduction,"onUpdate:value":n[4]||(n[4]=r=>o.productIntroduction=r),"auto-size":{minRows:4,maxRows:6}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),de=H({__name:"ProjectTypeAdd",emits:["save"],setup(Y,{expose:C,emit:x}){const i=f(!1),o=O({id:"",pbTypeName:"",detectProject:"",productNumber:"",timeToMarket:"",productIntroduction:""}),c=f(null),w={pbTypeName:[{required:!0,message:"请输入类型名称",trigger:"blur"}],detectProject:[{required:!0,message:"请选择检测项目",trigger:"change"}],productNumber:[{required:!0,message:"请选择货号",trigger:"change"}],timeToMarket:[{required:!0,message:"请选择上市时间",trigger:"change"}],productIntroduction:[{required:!0,message:"请输入产品简介",trigger:"blur"}]},k=x;C({begin:()=>{var n;(n=c.value)==null||n.resetFields(),o.productIntroduction="",S(()=>{i.value=!0})},end:()=>{i.value=!1}});const m=()=>{$.confirm({title:"确定取消",content:"是否确定取消操作？",okText:"确定",cancelText:"取消",onOk:()=>{i.value=!1}})},u=async()=>{var n;await((n=c.value)==null?void 0:n.validate()),k("save",o)};return(n,s)=>{const p=d("a-input"),v=d("a-form-item"),N=d("a-date-picker"),b=d("a-form"),I=d("a-button"),M=d("a-modal");return U(),z(M,{open:i.value,"onUpdate:open":s[5]||(s[5]=r=>i.value=r),title:"产品类型添加"},{footer:a(()=>[t(I,{onClick:m},{default:a(()=>s[6]||(s[6]=[_("取消")])),_:1}),t(I,{type:"primary",onClick:u},{default:a(()=>s[7]||(s[7]=[_("确定")])),_:1})]),default:a(()=>[t(b,{model:o,ref_key:"formRef",ref:c,rules:w},{default:a(()=>[t(v,{label:"类型名称",name:"pbTypeName"},{default:a(()=>[t(p,{value:o.pbTypeName,"onUpdate:value":s[0]||(s[0]=r=>o.pbTypeName=r),placeholder:"请输入类型名称"},null,8,["value"])]),_:1}),t(v,{label:"检测项目",name:"detectProject"},{default:a(()=>[t(p,{value:o.detectProject,"onUpdate:value":s[1]||(s[1]=r=>o.detectProject=r),placeholder:"请输入检测项目"},null,8,["value"])]),_:1}),t(v,{label:"货号",name:"productNumber"},{default:a(()=>[t(p,{value:o.productNumber,"onUpdate:value":s[2]||(s[2]=r=>o.productNumber=r),placeholder:"请输入货号"},null,8,["value"])]),_:1}),t(v,{label:"上市时间",name:"timeToMarket"},{default:a(()=>[t(N,{style:{width:"380px"},type:"date",value:o.timeToMarket,"onUpdate:value":s[3]||(s[3]=r=>o.timeToMarket=r)},null,8,["value"])]),_:1}),t(v,{label:"产品简介"},{default:a(()=>[t(p,{value:o.productIntroduction,"onUpdate:value":s[4]||(s[4]=r=>o.productIntroduction=r),placeholder:"请输入产品简介"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),ue=H({__name:"ProjectTypeDetail",emits:["save"],setup(Y,{expose:C,emit:x}){const i=f(!1),o=O({productIntroduction:""}),c=f(null),w=x;C({begin:m=>{o.productIntroduction=m,S(()=>{i.value=!0})},end:()=>i.value=!1});const k=()=>{w("save",o)};return(m,u)=>{const n=d("a-textarea"),s=d("a-form-item"),p=d("a-form"),v=d("a-button"),N=d("a-modal");return U(),z(N,{open:i.value,"onUpdate:open":u[1]||(u[1]=b=>i.value=b),title:"详情"},{footer:a(()=>[t(v,{type:"primary",onClick:k},{default:a(()=>u[2]||(u[2]=[_("确定")])),_:1})]),default:a(()=>[t(p,{model:o,ref_key:"formRef",ref:c},{default:a(()=>[t(s,{label:"产品介绍"},{default:a(()=>[t(n,{value:o.productIntroduction,"onUpdate:value":u[0]||(u[0]=b=>o.productIntroduction=b),valueModifiers:{trim:!0},"auto-size":{minRows:4,maxRows:6},readonly:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),ie={class:"product_type_page"},ce={class:"table_form_view"},pe={class:"market_form_date"},me={class:"market_form_date"},_e={class:"table_action_view"},fe={class:"table_search_handler"},ve={class:"table_action_button"},be={class:"table_title"},ye={class:"table_title_icon"},xe={key:0,class:"action_button_list"},ke={key:1},Te=H({__name:"index",setup(Y){const C=f(null),x=f(null),i=f(null),o=f(null),c=O({current:1,size:10,startTime:null,endTime:null}),w=A([]),k=A(0);ee(()=>{m()});const m=async()=>{const l=await ne(c);w.value=l.records,k.value||(k.value=l.total||0)},u=async()=>{m()},n=async l=>{var e;await V(l),(e=x.value)==null||e.end(),m(),D.success("修改成功")},s=async l=>{var e;await V(l),(e=i.value)==null||e.end(),m(),D.success("新增成功")},p=async l=>{$.confirm({title:"确定删除？",content:"此操作不可撤销，请确认是否删除!!!",okText:"确认",cancelText:"取消",onOk:async()=>{const e=await le({ids:l});(e==null?void 0:e.code)===200?(m(),D.success("删除成功")):$.info({title:"操作提示",content:"无法删除，仅可修改。",onOk(){}})},onCancel(){D.error("操作已取消")}})},v=()=>{var l;(l=o.value)==null||l.end()},N=()=>{c.value.startTime=null,c.value.endTime=null},b=[{title:"序号",customRender:({text:l,record:e,index:T})=>`${T+1}`,align:"center"},{title:"类型名称",customRender:({text:l,record:e,index:T})=>`${e.pbTypeName}`,dataIndex:"pbTypeName",align:"center"},{title:"检测项目",customRender:({text:l,record:e,index:T})=>`${e.detectProject}`,dataIndex:"detectProject",align:"center"},{title:"货号",customRender:({text:l,record:e,index:T})=>`${e.productNumber}`,dataIndex:"productNumber",align:"center"},{title:"产品简介",customRender:({text:l,record:e,index:T})=>`${e.productIntroduction}`,dataIndex:"productIntroduction",align:"center"},{title:"最后编辑时间",customRender:({text:l,record:e,index:T})=>`${e.updateTime}`,dataIndex:"updateTime",align:"center"},{title:"操作",dataIndex:"action",align:"center",width:180}],I=()=>{const l=["操作","序号"];return[...b.filter(e=>!l.includes(e.title))]},M=f([]),r=f([]),X=te(()=>({selectedRowKeys:M.value,onChange:(l,e)=>{M.value=l,r.value=e}})),G=()=>{$.confirm({title:"确定导出选中数据吗？",content:"导出后无法修改，请确认是否导出？",okText:"确定",cancelText:"取消",onOk:()=>{h(r.value.map((l,e)=>({...l,sn:e})),I(),"selectedData.xlsx")}})},J=l=>{c.current=l.current,c.size=l.pageSize,m()};return(l,e)=>{const T=d("a-date-picker"),B=d("a-form-item"),L=d("a-form"),R=d("a-button"),Q=d("a-divider"),W=d("a-table");return U(),q("div",ie,[y("div",ce,[t(L,{class:"search_form",ref_key:"formRef",ref:C,model:c,layout:"inline",autocomplete:"off"},{default:a(()=>[t(B,{label:"上市时间"},{default:a(()=>[y("div",pe,[t(T,{style:{width:"200px"},type:"date",valueFormat:"YYYY-MM-DD",value:c.startTime,"onUpdate:value":e[0]||(e[0]=g=>c.startTime=g)},null,8,["value"])])]),_:1}),e[3]||(e[3]=y("span",null,"-",-1)),t(B,null,{default:a(()=>[y("div",me,[t(T,{style:{width:"200px"},type:"date",valueFormat:"YYYY-MM-DD",value:c.endTime,"onUpdate:value":e[1]||(e[1]=g=>c.endTime=g)},null,8,["value"])])]),_:1})]),_:1},8,["model"]),y("div",_e,[y("div",fe,[t(R,{class:"table_search_button",type:"primary",onClick:u},{default:a(()=>e[4]||(e[4]=[_("查询")])),_:1}),t(R,{class:"table_search_clean_button",type:"primary",onClick:N},{default:a(()=>e[5]||(e[5]=[_("清除")])),_:1}),t(R,{class:"table_search_button",type:"primary",onClick:G},{default:a(()=>e[6]||(e[6]=[_("导出信息")])),_:1})]),y("div",ve,[t(R,{class:"table_action_add",type:"primary",onClick:e[2]||(e[2]=g=>{var P;return(P=i.value)==null?void 0:P.begin()})},{default:a(()=>e[7]||(e[7]=[_("增加产品类型")])),_:1})])])]),y("div",be,[y("div",ye,[t(E(oe))]),e[8]||(e[8]=y("div",{class:"table_title_text"},"菜单名称",-1))]),t(W,{columns:b,"data-source":w.value,"row-selection":X.value,rowKey:g=>g.id,pagination:E(Z)(k.value),onChange:J},{bodyCell:a(({column:g,record:P})=>[g.dataIndex==="action"?(U(),q("div",xe,[t(R,{class:"action_button",type:"primary",ghost:"",onClick:K=>{var j;return(j=x.value)==null?void 0:j.begin(P)}},{default:a(()=>e[9]||(e[9]=[_("修改")])),_:2},1032,["onClick"]),t(Q,{type:"vertical"}),t(R,{class:"action_button",type:"primary",ghost:"",danger:"",onClick:K=>p(P.id)},{default:a(()=>e[10]||(e[10]=[_(" 删除 ")])),_:2},1032,["onClick"])])):F("",!0),g.dataIndex==="productIntroduction"?(U(),q("div",ke,[t(R,{class:"no-border-button",type:"primary",ghost:"",onClick:K=>{var j;return(j=o.value)==null?void 0:j.begin(P.productIntroduction)}},{default:a(()=>e[11]||(e[11]=[_(" 详情 ")])),_:2},1032,["onClick"])])):F("",!0)]),_:1},8,["data-source","row-selection","rowKey","pagination"]),t(se,{ref_key:"updateRef",ref:x,onSave:n},null,512),t(de,{ref_key:"addRef",ref:i,onSave:s},null,512),t(ue,{ref_key:"detailRef",ref:o,onSave:v},null,512)])}}}),Ie=ae(Te,[["__scopeId","data-v-4a1972ce"]]);export{Ie as default};
