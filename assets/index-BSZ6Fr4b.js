import{a as N,s as S}from"./index-XXkNLdLx.js";import{d as A,r as u,b as v,l as V,w as r,a as D,m as j,h as s,f as n,p as F,j as M,e as O,_ as q,q as R,o as U,c as b,i as I,t as $,s as w}from"./index-DDqPfp3K.js";const P=p=>(F("data-v-df1a2789"),p=p(),M(),p),T=P(()=>O("div",{class:"modalAlarm"},"*注意：标品新增完成后不支持编辑和删除，请确保首次新建时标品信息录入正确。",-1)),E=A({__name:"supplierAdd",setup(p,{expose:c}){const l=u(),d=u({name:""}),g={name:[{required:!0,message:"请输入标品名称 ",trigger:"change"}]},h=(e,o)=>{e.target.value=e.target.value.replace(/\s+/g,""),d.value[o]=e.target.value},m=()=>{l.value.validate().then(async()=>{const e=await N(d.value);e.affected&&(D.push({path:"/standard_projuct_directory_info",query:{id:e.id}}),j.success("新建成功"),a())})},i=u(!1),_=()=>{i.value=!0},a=()=>{var e;i.value=!1,(e=l.value)==null||e.resetFields()};return c({show:_}),(e,o)=>{const x=s("a-input"),f=s("a-form-item"),y=s("a-form"),C=s("a-modal");return v(),V(C,{ref_key:"formRef",ref:l,open:i.value,"onUpdate:open":o[2]||(o[2]=t=>i.value=t),title:"新建","ok-text":"确认","cancel-text":"取消",centered:"",onOk:m,onCancel:a},{default:r(()=>[T,n(y,{style:{padding:"0 10px 10px 10px"},ref_key:"formRef",ref:l,model:d.value,rules:g,autocomplete:"off"},{default:r(()=>[n(f,{label:"标品名称：",name:"name"},{default:r(()=>[n(x,{value:d.value.name,"onUpdate:value":o[0]||(o[0]=t=>d.value.name=t),valueModifiers:{trim:!0},placeholder:"请输入标品名称",onChange:o[1]||(o[1]=t=>h(t,"name")),allowClear:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),L=q(E,[["__scopeId","data-v-df1a2789"]]),z={class:"supplier-page"},G={class:"table"},H={key:0},J={key:1,class:"table_button"},K=A({__name:"index",setup(p){const c=u({nameOrCode:null}),l=u({pagination:{},records:[]}),d=u([{title:"序号",dataIndex:"sn",align:"center"},{title:"编号编号",dataIndex:"code",align:"center"},{title:"标品名称",dataIndex:"name",align:"center"},{title:"操作",dataIndex:"action",align:"center"}]),g=(a,e)=>{a.target.value=a.target.value.replace(/\s+/g,""),c.value[e]=a.target.value},h=a=>{D.push({path:"/standard_projuct_directory_info",query:{id:a==null?void 0:a.id}})},m=u(null),i=()=>{m.value.show()},_=async(a={})=>{await S(a).then(e=>{l.value.pagination=e.pagination,l.value.records=e.records})};return R(()=>c.value,a=>{_(a)},{deep:!0}),U(()=>{_()}),(a,e)=>{const o=s("a-input"),x=s("a-form-item"),f=s("a-button"),y=s("a-form"),C=s("a-table");return v(),b("div",z,[n(y,{class:"search_form",autocomplete:"off"},{default:r(()=>[n(x,{label:"标品名称/编号："},{default:r(()=>[n(o,{style:{width:"200px"},value:c.value.nameOrCode,"onUpdate:value":e[0]||(e[0]=t=>c.value.nameOrCode=t),valueModifiers:{trim:!0},placeholder:"请输入标品名称/编号",onChange:e[1]||(e[1]=t=>g(t,"nameOrCode")),allowClear:""},null,8,["value"])]),_:1}),n(f,{class:"main_button",type:"primary",onClick:i},{default:r(()=>[I("新建")]),_:1})]),_:1}),O("div",G,[n(C,{columns:d.value,"data-source":l.value.records},{bodyCell:r(({record:t,column:k,index:B})=>[k.title==="序号"?(v(),b("div",H,$(B+1),1)):w("",!0),k.title==="操作"?(v(),b("div",J,[n(f,{type:"primary",onClick:Q=>h(t)},{default:r(()=>[I("查看详情")]),_:2},1032,["onClick"])])):w("",!0)]),_:1},8,["columns","data-source"])]),n(L,{ref_key:"addDom",ref:m},null,512)])}}}),Y=q(K,[["__scopeId","data-v-a915a0f5"]]);export{Y as default};
