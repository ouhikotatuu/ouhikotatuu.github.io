import{u as Z,e as h}from"./exportToExcel-BUpgOtO1.js";import{d as $,a as y,r as Y,p as B,b as i,c as z,q as S,w as n,g as e,l as k,M as H,z as A,o as ee,A as te,y as ae,e as E,f as x,x as V,C as ne,j as D,F as oe,B as j,_ as le}from"./index-DHTjKAgc.js";import{h as re}from"./moment-C5S46NFB.js";import{l as se,A as P,d as ie}from"./marketMange-Bzid1rzT.js";const de=$({__name:"MarketManageAdd",emits:["save"],setup(q,{expose:u,emit:I}){const d=y(!1),a=Y({id:"",marketName:"",marketOrganization:"",startOperationTime:"",detailInformation:""}),_=y(null),C={marketName:[{required:!0,message:"请输入市场名",trigger:"blur"}],marketOrganization:[{required:!0,message:"请输入所属机构",trigger:"blur"}],startOperationTime:[{required:!0,message:"请选择运营时间",trigger:"change"}]},O=I;u({begin:()=>{var o;(o=_.value)==null||o.resetFields(),a.detailInformation="",B(()=>{d.value=!0})},end:()=>{d.value=!1}});const m=()=>{H.confirm({title:"确定取消",content:"是否确定取消操作？",okText:"确定",cancelText:"取消",onOk:()=>{d.value=!1}})},l=async()=>{var o;await((o=_.value)==null?void 0:o.validate()),O("save",a)};return(o,r)=>{const c=i("a-input"),g=i("a-form-item"),T=i("a-date-picker"),p=i("a-form"),M=i("a-button"),f=i("a-modal");return z(),S(f,{open:d.value,"onUpdate:open":r[4]||(r[4]=v=>d.value=v),title:"增加新市场"},{footer:n(()=>[e(M,{onClick:m},{default:n(()=>r[5]||(r[5]=[k("取消")])),_:1}),e(M,{type:"primary",onClick:l},{default:n(()=>r[6]||(r[6]=[k("确定")])),_:1})]),default:n(()=>[e(p,{model:a,ref_key:"formRef",ref:_,rules:C},{default:n(()=>[e(g,{label:"市场名",name:"marketName"},{default:n(()=>[e(c,{value:a.marketName,"onUpdate:value":r[0]||(r[0]=v=>a.marketName=v),placeholder:"市场名"},null,8,["value"])]),_:1}),e(g,{label:"所属机构",name:"marketOrganization"},{default:n(()=>[e(c,{value:a.marketOrganization,"onUpdate:value":r[1]||(r[1]=v=>a.marketOrganization=v),placeholder:"所属机构"},null,8,["value"])]),_:1}),e(g,{label:"运营时间",name:"startOperationTime"},{default:n(()=>[e(T,{style:{width:"380px"},type:"date",value:a.startOperationTime,"onUpdate:value":r[2]||(r[2]=v=>a.startOperationTime=v)},null,8,["value"])]),_:1}),e(g,{label:"详情"},{default:n(()=>[e(c,{value:a.detailInformation,"onUpdate:value":r[3]||(r[3]=v=>a.detailInformation=v),placeholder:"请输入简要信息"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),ue=$({__name:"MarketManageEdit",emits:["save"],setup(q,{expose:u,emit:I}){const d=y(!1),a=Y({id:"",marketName:"",marketOrganization:"",startOperationTime:"",detailInformation:""}),_=y(null),C=I;u({begin:l=>{a.id=l.id,a.marketName=l.marketName,a.marketOrganization=l.marketOrganization,a.startOperationTime=re(l.startOperationTime),a.detailInformation=l.detailInformation,B(()=>{d.value=!0})},end:()=>{d.value=!1}});const O=()=>{H.confirm({title:"确定取消",content:"是否确定取消操作？",okText:"确定",cancelText:"取消",onOk:()=>{d.value=!1}})},m=async()=>{var l;await((l=_.value)==null?void 0:l.validate()),C("save",a)};return(l,o)=>{const r=i("a-input"),c=i("a-form-item"),g=i("a-date-picker"),T=i("a-form"),p=i("a-button"),M=i("a-modal");return z(),S(M,{open:d.value,"onUpdate:open":o[4]||(o[4]=f=>d.value=f),title:"修改新市场"},{footer:n(()=>[e(p,{onClick:O},{default:n(()=>o[5]||(o[5]=[k("取消")])),_:1}),e(p,{type:"primary",onClick:m},{default:n(()=>o[6]||(o[6]=[k("确定")])),_:1})]),default:n(()=>[e(T,{model:a,ref_key:"formRef",ref:_},{default:n(()=>[e(c,{label:"市场名"},{default:n(()=>[e(r,{value:a.marketName,"onUpdate:value":o[0]||(o[0]=f=>a.marketName=f),placeholder:"市场名"},null,8,["value"])]),_:1}),e(c,{label:"所属机构"},{default:n(()=>[e(r,{value:a.marketOrganization,"onUpdate:value":o[1]||(o[1]=f=>a.marketOrganization=f),placeholder:"所属机构"},null,8,["value"])]),_:1}),e(c,{label:"运营时间"},{default:n(()=>[e(g,{style:{width:"380px"},type:"date",value:a.startOperationTime,"onUpdate:value":o[2]||(o[2]=f=>a.startOperationTime=f)},null,8,["value"])]),_:1}),e(c,{label:"详情"},{default:n(()=>[e(r,{value:a.detailInformation,"onUpdate:value":o[3]||(o[3]=f=>a.detailInformation=f),placeholder:"请输入简要信息"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),me=$({__name:"MarketManage",emits:["save"],setup(q,{expose:u,emit:I}){const d=y(!1),a=Y({id:"",marketName:"",marketOrganization:"",startOperationTime:"",detailInformation:"",userId:"",userName:"",userCompany:""}),_=y(null),C=I;u({begin:m=>{a.userId=m.userId,a.userName=m.userName,a.userCompany=m.userCompany,B(()=>{d.value=!0})},end:()=>d.value=!1});const O=()=>{C("save",a)};return(m,l)=>{const o=i("a-input"),r=i("a-form-item"),c=i("a-form"),g=i("a-button"),T=i("a-modal");return z(),S(T,{open:d.value,"onUpdate:open":l[3]||(l[3]=p=>d.value=p),title:"市场管理"},{footer:n(()=>[e(g,{type:"primary",onClick:O},{default:n(()=>l[4]||(l[4]=[k("确定")])),_:1})]),default:n(()=>[e(c,{model:a,ref_key:"formRef",ref:_},{default:n(()=>[e(r,{label:"用户ID"},{default:n(()=>[e(o,{readonly:"",value:a.userId,"onUpdate:value":l[0]||(l[0]=p=>a.userId=p),"auto-size":{minRows:4,maxRows:6}},null,8,["value"])]),_:1}),e(r,{label:"用户名"},{default:n(()=>[e(o,{readonly:"",value:a.userName,"onUpdate:value":l[1]||(l[1]=p=>a.userName=p)},null,8,["value"])]),_:1}),e(r,{label:"用户单位"},{default:n(()=>[e(o,{readonly:"",value:a.userCompany,"onUpdate:value":l[2]||(l[2]=p=>a.userCompany=p)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),pe={class:"product_market_page"},fe={class:"table_form_view"},_e={class:"market_form_date"},ce={class:"market_form_date"},ve={class:"table_action_view"},ke={class:"table_search_handler"},ye={class:"table_action_button"},ge={class:"table_title"},be={class:"table_title_icon"},xe=$({__name:"index",setup(q){const u=Y({current:1,size:10,startTime:"",endTime:""}),I=A([]),d=A(0),a=y(null),_=y(null),C=y(null),O=y(null);ee(async()=>{m()});const m=async()=>{const s=await se(u);I.value=s.records,d.value||(d.value=s.total||0)},l=async()=>{m()},o=()=>{u.startTime="",u.endTime="",m()},r=async s=>{var t;await P(s),(t=C.value)==null||t.end(),m(),D.success("新增成功")},c=async s=>{var t;await P(s),(t=_.value)==null||t.end(),m(),D.success("修改成功")},g=async s=>{H.confirm({title:"确定删除？",content:"此操作不可撤销，请确认是否删除!!!",okText:"确认",cancelText:"取消",onOk:async()=>{const t=await ie({ids:s});(t==null?void 0:t.code)===200?(m(),D.success("删除成功")):H.info({title:"操作提示",content:"无法删除，仅可修改。",onOk(){}})},onCancel(){D.error("操作已取消")}})},T=()=>{var s;(s=O.value)==null||s.end()},p=[{title:"序号",customRender:({text:s,record:t,index:N})=>`${N+1}`,align:"center"},{title:"市场名",dataIndex:"marketName",align:"center"},{title:"所属机构",dataIndex:"marketOrganization",align:"center"},{title:"运营时间",dataIndex:"startOperationTime",align:"center"},{title:"详情",dataIndex:"detailInformation",align:"center"},{title:"市场管理",dataIndex:"marketManage",align:"center"},{title:"操作",dataIndex:"action",align:"center",width:200}],M=()=>{const s=["市场管理","操作","序号"],t=[{title:"用户id",dataIndex:"userId"},{title:"用户名称",dataIndex:"userName"},{title:"用户组织",dataIndex:"userCompany"}];return[...p.filter(N=>!s.includes(N.title)),...t]},f=y([]),v=y([]),X=te(()=>({selectedRowKeys:f.value,onChange:(s,t)=>{f.value=s,v.value=t}})),G=()=>{H.confirm({title:"确定导出选中数据吗？",content:"导出后无法修改，请确认是否导出？",okText:"确定",cancelText:"取消",onOk:()=>{h(v.value.map((s,t)=>({...s,sn:t})),M(),"selectedData.xlsx")}})},J=s=>{u.current=s.current,u.size=s.pageSize,m()};return ae(()=>u,s=>{console.log(s)},{deep:!0}),(s,t)=>{const N=i("a-date-picker"),F=i("a-form-item"),L=i("a-form"),w=i("a-button"),Q=i("a-divider"),W=i("a-table");return z(),E("div",pe,[x("div",fe,[e(L,{class:"search_form",ref_key:"formRef",ref:a,model:u,layout:"inline",autocomplete:"off"},{default:n(()=>[e(F,{label:"运营时间",name:"date"},{default:n(()=>[x("div",_e,[e(N,{style:{width:"220px"},value:u.startTime,"onUpdate:value":t[0]||(t[0]=b=>u.startTime=b),valueFormat:"YYYY-MM-DD"},null,8,["value"])])]),_:1}),t[4]||(t[4]=x("span",null,"-",-1)),e(F,{name:"date"},{default:n(()=>[x("div",ce,[e(N,{style:{width:"220px"},value:u.endTime,"onUpdate:value":t[1]||(t[1]=b=>u.endTime=b),valueFormat:"YYYY-MM-DD"},null,8,["value"])])]),_:1})]),_:1},8,["model"]),x("div",ve,[x("div",ke,[e(w,{class:"table_search_button",type:"primary",onClick:t[2]||(t[2]=b=>l())},{default:n(()=>t[5]||(t[5]=[k("查询")])),_:1}),e(w,{class:"table_search_clean_button",type:"primary",onClick:o},{default:n(()=>t[6]||(t[6]=[k("清除")])),_:1}),e(w,{class:"table_search_button",type:"primary",onClick:G},{default:n(()=>t[7]||(t[7]=[k("导出信息")])),_:1})]),x("div",ye,[e(w,{class:"table_action_add",type:"primary",onClick:t[3]||(t[3]=b=>{var R;return(R=C.value)==null?void 0:R.begin()})},{default:n(()=>t[8]||(t[8]=[k(" 增加新市场 ")])),_:1})])])]),x("div",ge,[x("div",be,[e(V(ne))]),t[9]||(t[9]=x("div",{class:"table_title_text"},"菜单名称",-1))]),e(W,{columns:p,"data-source":I.value,pagination:V(Z)(d.value),"row-selection":X.value,rowKey:b=>b.id,onChange:J},{bodyCell:n(({column:b,record:R})=>[b.dataIndex==="action"?(z(),E(oe,{key:0},[e(w,{class:"no-border-button",type:"primary",ghost:"",danger:"",onClick:K=>g(R.id)},{default:n(()=>t[10]||(t[10]=[k("删除")])),_:2},1032,["onClick"]),e(Q,{type:"vertical"}),e(w,{class:"no-border-button",type:"primary",ghost:"",onClick:K=>{var U;return(U=_.value)==null?void 0:U.begin(R)}},{default:n(()=>t[11]||(t[11]=[k("修改")])),_:2},1032,["onClick"])],64)):j("",!0),b.dataIndex==="marketManage"?(z(),S(w,{key:1,class:"no-border-button",type:"primary",ghost:"",onClick:K=>{var U;return(U=O.value)==null?void 0:U.begin(R)}},{default:n(()=>t[12]||(t[12]=[k("点击查看")])),_:2},1032,["onClick"])):j("",!0)]),_:1},8,["data-source","pagination","row-selection","rowKey"]),e(de,{ref_key:"addRef",ref:C,onSave:r},null,512),e(ue,{ref_key:"updateRef",ref:_,onSave:c},null,512),e(me,{ref_key:"MarketManageRef",ref:O,onSave:T},null,512)])}}}),we=le(xe,[["__scopeId","data-v-55bbe998"]]);export{we as default};
