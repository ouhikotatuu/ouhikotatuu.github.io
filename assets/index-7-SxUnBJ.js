import{u as se,e as ce}from"./exportToExcel-BUpgOtO1.js";import{d as A,a as g,r as E,s as oe,p as V,b as s,c as m,q as P,w as o,g as t,l as k,e as M,v as I,x as z,F as $,f as C,M as Y,_ as L,y as J,z as te,o as ie,A as pe,C as me,j as K,B as Q}from"./index-DHTjKAgc.js";import{P as W,l as be,A as ae,d as ve}from"./productTypeStroe-CJkoG5F2.js";import"./productType-D4N8wgIn.js";const fe={style:{display:"flex","align-items":"center",gap:"10px"}},_e=A({__name:"ProjectBatchEdit",emits:["save"],setup(F,{expose:i,emit:h}){const b=g(!1),e=E({id:"",pbTypeName:"",detectProject:"",productNumber:"",batchNumber:"",batchCodeMax:"",batchCodeMin:"",inspectionMethod:"",batchCurve:"",createTime:""}),R=W(),{productTypeTableData:y}=oe(R),N=g(null),T=h;i({begin:p=>{e.pbTypeName=p.pbTypeName,e.detectProject=p.detectProject,e.id=p.id,e.batchNumber=p.batchNumber,e.batchCodeMax=p.batchCodeMax,e.batchCodeMin=p.batchCodeMin,e.inspectionMethod=p.inspectionMethod,e.productNumber=p.productNumber,e.batchCurve=p.batchCurve,V(()=>{b.value=!0})},end:()=>{b.value=!1}});const v=()=>{Y.confirm({title:"确定取消",content:"是否确定取消操作？",okText:"确定",cancelText:"取消",onOk:()=>{b.value=!1}})},j=async()=>{var p;await((p=N.value)==null?void 0:p.validate()),T("save",e)};return(p,n)=>{const l=s("a-select-option"),_=s("a-select"),f=s("a-form-item"),x=s("a-input"),U=s("a-form"),q=s("a-button"),D=s("a-modal");return m(),P(D,{open:b.value,"onUpdate:open":n[8]||(n[8]=u=>b.value=u),title:"产品批次修改"},{footer:o(()=>[t(q,{onClick:v},{default:o(()=>n[10]||(n[10]=[k("取消")])),_:1}),t(q,{type:"primary",onClick:j},{default:o(()=>n[11]||(n[11]=[k("确定")])),_:1})]),default:o(()=>[t(U,{model:e,ref_key:"formRef",ref:N},{default:o(()=>[t(f,{label:"产品类型"},{default:o(()=>[t(_,{value:e.pbTypeName,"onUpdate:value":n[0]||(n[0]=u=>e.pbTypeName=u)},{default:o(()=>[(m(!0),M($,null,I(z(y),u=>(m(),P(l,{value:u.pbTypeName,label:u.pbTypeName,key:u.id},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),t(f,{label:"检测项目"},{default:o(()=>[t(_,{value:e.detectProject,"onUpdate:value":n[1]||(n[1]=u=>e.detectProject=u)},{default:o(()=>[(m(!0),M($,null,I(z(y),u=>(m(),P(l,{value:u.detectProject,label:u.detectProject,key:u.id},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),t(f,{label:"货号"},{default:o(()=>[t(_,{value:e.productNumber,"onUpdate:value":n[2]||(n[2]=u=>e.productNumber=u)},{default:o(()=>[(m(!0),M($,null,I(z(y),u=>(m(),P(l,{value:u.productNumber,label:u.productNumber,key:u.id},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),t(f,{label:"批号"},{default:o(()=>[t(x,{value:e.batchNumber,"onUpdate:value":n[3]||(n[3]=u=>e.batchNumber=u)},null,8,["value"])]),_:1}),t(f,{label:"滚码检测范围"},{default:o(()=>[C("div",fe,[t(x,{value:e.batchCodeMin,"onUpdate:value":n[4]||(n[4]=u=>e.batchCodeMin=u),allowClear:"",placeholder:"请输入"},null,8,["value"]),n[9]||(n[9]=C("span",null,"-",-1)),t(x,{value:e.batchCodeMax,"onUpdate:value":n[5]||(n[5]=u=>e.batchCodeMax=u),allowClear:"",placeholder:"请输入"},null,8,["value"])])]),_:1}),t(f,{label:"检测方法"},{default:o(()=>[t(x,{value:e.inspectionMethod,"onUpdate:value":n[6]||(n[6]=u=>e.inspectionMethod=u)},null,8,["value"])]),_:1}),t(f,{label:"曲线"},{default:o(()=>[t(x,{value:e.batchCurve,"onUpdate:value":n[7]||(n[7]=u=>e.batchCurve=u)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),ye=L(_e,[["__scopeId","data-v-1c113cd7"]]),xe={style:{display:"flex","align-items":"center",gap:"10px"}},Ce=A({__name:"ProjectBatchAdd",emits:["save"],setup(F,{expose:i,emit:h}){const b=g(!1),e=E({id:"",pbTypeName:null,detectProject:null,productNumber:null,batchNumber:"",batchCodeMax:"",batchCodeMin:"",inspectionMethod:"",batchCurve:"",createTime:""}),R=W(),{productTypeTableData:y}=oe(R),N=g(null),T={pbTypeName:[{required:!0,message:"请选择产品名称",trigger:"blur"}],detectProject:[{required:!0,message:"请选择检测项目",trigger:"blur"}],batchNumber:[{required:!0,message:"请选择批号",trigger:"blur"}],batchCode:[{required:!0,message:"请输入滚码检测范围",trigger:"blur"}],batchCurve:[{required:!0,message:"请输入曲线",trigger:"blur"}],inspectionMethod:[{required:!0,message:"请输入检测方法",trigger:"blur"}],productNumber:[{required:!0,message:"请输入货号",trigger:"blur"}]},v=h;i({begin:()=>{var n;(n=N.value)==null||n.resetFields(),V(()=>{b.value=!0})},end:()=>{b.value=!1}});const j=()=>{Y.confirm({title:"确定取消",content:"是否确定取消操作？",okText:"确定",cancelText:"取消",onOk:()=>{b.value=!1}})},p=async()=>{var n;await((n=N.value)==null?void 0:n.validate()),v("save",e)};return J(()=>e.pbTypeName,n=>{const l=y.value.find(_=>_.pbTypeName===n);l&&(e.detectProject=l.detectProject,e.productNumber=l.productNumber)}),J(()=>e.detectProject,n=>{const l=y.value.find(_=>_.detectProject===n);l&&(e.pbTypeName=l.pbTypeName,e.productNumber=l.productNumber)}),J(()=>e.productNumber,n=>{const l=y.value.find(_=>_.productNumber===n);l&&(e.pbTypeName=l.pbTypeName,e.detectProject=l.detectProject)}),(n,l)=>{const _=s("a-select-option"),f=s("a-select"),x=s("a-form-item"),U=s("a-input"),q=s("a-form"),D=s("a-button"),u=s("a-modal");return m(),P(u,{open:b.value,"onUpdate:open":l[8]||(l[8]=d=>b.value=d),title:"产品批次增加"},{footer:o(()=>[t(D,{onClick:j},{default:o(()=>l[10]||(l[10]=[k("取消")])),_:1}),t(D,{type:"primary",onClick:p},{default:o(()=>l[11]||(l[11]=[k("确定")])),_:1})]),default:o(()=>[t(q,{model:e,ref_key:"formRef",ref:N,rules:T},{default:o(()=>[t(x,{label:"产品类型名称",name:"pbTypeName"},{default:o(()=>[t(f,{value:e.pbTypeName,"onUpdate:value":l[0]||(l[0]=d=>e.pbTypeName=d),placeholder:"请选择产品类型"},{default:o(()=>[(m(!0),M($,null,I(z(y),d=>(m(),P(_,{value:d.pbTypeName,label:d.pbTypeName,key:d.id},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),t(x,{label:"检测项目",name:"detectProject"},{default:o(()=>[t(f,{value:e.detectProject,"onUpdate:value":l[1]||(l[1]=d=>e.detectProject=d),placeholder:"请选择检测项目"},{default:o(()=>[(m(!0),M($,null,I(z(y),d=>(m(),P(_,{value:d.detectProject,label:d.detectProject,key:d.id},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),t(x,{label:"货号",name:"productNumber"},{default:o(()=>[t(f,{value:e.productNumber,"onUpdate:value":l[2]||(l[2]=d=>e.productNumber=d),placeholder:"请选择货号"},{default:o(()=>[(m(!0),M($,null,I(z(y),d=>(m(),P(_,{value:d.productNumber,label:d.productNumber,key:d.id},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),t(x,{label:"批号",name:"batchNumber"},{default:o(()=>[t(U,{value:e.batchNumber,"onUpdate:value":l[3]||(l[3]=d=>e.batchNumber=d)},null,8,["value"])]),_:1}),t(x,{label:"滚码检测范围",name:"batchCode"},{default:o(()=>[C("div",xe,[t(U,{value:e.batchCodeMin,"onUpdate:value":l[4]||(l[4]=d=>e.batchCodeMin=d),allowClear:"",placeholder:"请输入"},null,8,["value"]),l[9]||(l[9]=C("span",null,"-",-1)),t(U,{value:e.batchCodeMax,"onUpdate:value":l[5]||(l[5]=d=>e.batchCodeMax=d),allowClear:"",placeholder:"请输入"},null,8,["value"])])]),_:1}),t(x,{label:"检测方法",name:"inspectionMethod"},{default:o(()=>[t(U,{value:e.inspectionMethod,"onUpdate:value":l[6]||(l[6]=d=>e.inspectionMethod=d)},null,8,["value"])]),_:1}),t(x,{label:"曲线",name:"batchCurve"},{default:o(()=>[t(U,{value:e.batchCurve,"onUpdate:value":l[7]||(l[7]=d=>e.batchCurve=d)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),ge=L(Ce,[["__scopeId","data-v-f020e493"]]),Ne=A({__name:"ProductBatchDetail",emits:["save"],setup(F,{expose:i,emit:h}){const b=g(!1),e=E({productIntroduction:""}),R=g(null),y=h;i({begin:T=>{e.productIntroduction=T,V(()=>{b.value=!0})},end:()=>b.value=!1});const N=()=>{y("save",e)};return(T,v)=>{const j=s("a-textarea"),p=s("a-form-item"),n=s("a-form"),l=s("a-button"),_=s("a-modal");return m(),P(_,{open:b.value,"onUpdate:open":v[1]||(v[1]=f=>b.value=f),title:"详情"},{footer:o(()=>[t(l,{type:"primary",onClick:N},{default:o(()=>v[2]||(v[2]=[k("确定")])),_:1})]),default:o(()=>[t(n,{model:e,ref_key:"formRef",ref:R},{default:o(()=>[t(p,{label:"产品介绍"},{default:o(()=>[t(j,{readonly:"",value:e.productIntroduction,"onUpdate:value":v[0]||(v[0]=f=>e.productIntroduction=f),valueModifiers:{trim:!0},tirm:"","auto-size":{minRows:4,maxRows:6}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),Te=A({__name:"ProductBatchCode",emits:["save"],setup(F,{expose:i,emit:h}){const b=g(!1),e=E({batchCodeMin:"",batchCodeMax:""}),R=g(null),y=h;i({begin:T=>{e.batchCodeMin=T.batchCodeMin,e.batchCodeMax=T.batchCodeMax,V(()=>{b.value=!0})},end:()=>b.value=!1});const N=()=>{y("save",e)};return(T,v)=>{const j=s("a-input"),p=s("a-form-item"),n=s("a-form"),l=s("a-button"),_=s("a-modal");return m(),P(_,{open:b.value,"onUpdate:open":v[2]||(v[2]=f=>b.value=f),title:"滚码详情"},{footer:o(()=>[t(l,{type:"primary",onClick:N},{default:o(()=>v[4]||(v[4]=[k("确定")])),_:1})]),default:o(()=>[t(n,{model:e,ref_key:"formRef",ref:R},{default:o(()=>[t(p,{label:"滚码",style:{"text-align":"center",display:"flex","justify-content":"space-between","align-items":"center",gap:"10px"}},{default:o(()=>[t(j,{readonly:"",value:e.batchCodeMin,"onUpdate:value":v[0]||(v[0]=f=>e.batchCodeMin=f),valueModifiers:{trim:!0},"auto-size":{minRows:4,maxRows:6},style:{width:"120px",height:"40px","border-radius":"10px","text-align":"center","font-size":"16px",padding:"10px","background-color":"#f9f9f9",border:"1px solid #dcdcdc","box-shadow":"0 2px 6px rgba(0, 0, 0, 0.1)"}},null,8,["value"]),v[3]||(v[3]=C("span",{style:{"font-size":"18px",color:"#333","font-weight":"bold"}},"-",-1)),t(j,{readonly:"",value:e.batchCodeMax,"onUpdate:value":v[1]||(v[1]=f=>e.batchCodeMax=f),valueModifiers:{trim:!0},"auto-size":{minRows:4,maxRows:6},style:{width:"120px",height:"40px","border-radius":"10px","text-align":"center","font-size":"16px",padding:"10px","background-color":"#f9f9f9",border:"1px solid #dcdcdc","box-shadow":"0 2px 6px rgba(0, 0, 0, 0.1)"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),ke=L(Te,[["__scopeId","data-v-c6c4dc87"]]),he={class:"product_bactch_page"},we={class:"table_form_view"},Me={class:"market_form_date"},Pe={class:"market_form_date"},Re={class:"table_action_view"},je={class:"table_search_handler"},Ue={class:"table_action_button"},Ie={class:"table_title"},$e={class:"table_title_icon"},Be={key:0,class:"action_button_list"},Se={key:1},ze={key:2},De=A({__name:"index",setup(F){const i=E({current:1,size:10,pbTypeName:null,detectProject:null,productNumber:null,startTime:null,endTime:null}),h=te([]),b=te(0),e=g(null),R=g(null),y=g(null),N=g(null),T=g(null),v=W(),{ProductTypedata:j}=v;ie(async()=>{p(),j()});const p=async()=>{const r=await be(i);h.value=r.records,b.value||(b.value=r.total||0)},n=async r=>{var a;await ae(r),(a=R.value)==null||a.end(),p(),K.success("修改成功")},l=async r=>{var a;await ae(r),(a=y.value)==null||a.end(),p(),K.success("新增成功")},_=async r=>{Y.confirm({title:"确定删除？",content:"此操作不可撤销，请确认是否删除!!!",okText:"确认",cancelText:"取消",onOk:async()=>{const a=await ve({ids:r});(a==null?void 0:a.code)===200?(p(),K.success("删除成功")):Y.info({title:"操作提示",content:"无法删除，仅可修改。",onOk(){}})},onCancel(){K.error("操作已取消")}})},f=()=>{var r;(r=N.value)==null||r.end()},x=()=>{var r;(r=T.value)==null||r.end()},U=async()=>{p()},q=async()=>{i.pbTypeName=null,i.detectProject=null,i.productNumber=null,i.startTime=null,i.endTime=null,p()},D=[{title:"序号",customRender:({text:r,record:a,index:w})=>`${w+1}`,align:"center"},{title:"产品类型名称",dataIndex:"pbTypeName",customRender:({text:r,record:a,index:w})=>`${a.pbTypeName}`,align:"center"},{title:"检测项目",dataIndex:"detectProject",customRender:({text:r,record:a,index:w})=>`${a.detectProject}`,align:"center"},{title:"货号",dataIndex:"productNumber",customRender:({text:r,record:a,index:w})=>`${a.productNumber}`,align:"center"},{title:"批号",dataIndex:"batchNumber",customRender:({text:r,record:a,index:w})=>`${a.batchNumber}`,align:"center"},{title:"滚码",dataIndex:"batchCode",align:"center"},{title:"检测方法",dataIndex:"inspectionMethod",customRender:({text:r,record:a,index:w})=>`${a.inspectionMethod}`,align:"center"},{title:"曲线",dataIndex:"batchCurve",customRender:({text:r,record:a,index:w})=>`${a.batchCurve}`,align:"center"},{title:"产品简介",dataIndex:"productIntroduction",customRender:({text:r,record:a,index:w})=>`${a.productIntroduction}`,align:"center"},{title:"录入时间",dataIndex:"batchInputTime",customRender:({text:r,record:a,index:w})=>`${a.batchInputTime}`,align:"center"},{title:"操作",dataIndex:"action",align:"center",width:180}],u=()=>{const r=["操作","序号"];return[...D.filter(a=>!r.includes(a.title))]},d=g([]),Z=g([]),le=pe(()=>({selectedRowKeys:d.value,onChange:(r,a)=>{d.value=r,Z.value=a}})),ne=()=>{Y.confirm({title:"确定导出选中数据吗？",content:"导出后无法修改，请确认是否导出？",okText:"确定",cancelText:"取消",onOk:()=>{ce(Z.value.map((r,a)=>({...r,sn:a})),u(),"selectedData.xlsx")}})},ue=r=>{i.current=r.current,i.size=r.pageSize,p()};return(r,a)=>{const w=s("a-select-option"),X=s("a-select"),O=s("a-form-item"),ee=s("a-date-picker"),re=s("a-form"),B=s("a-button"),de=s("a-table");return m(),M("div",he,[C("div",we,[t(re,{class:"search_form",ref_key:"formRef",ref:e,model:i,layout:"inline",autocomplete:"off"},{default:o(()=>[t(O,{label:"产品类型名称",name:"pbTypeName"},{default:o(()=>[t(X,{value:i.pbTypeName,"onUpdate:value":a[0]||(a[0]=c=>i.pbTypeName=c),"show-search":"",style:{width:"220px"},allowClear:"",placeholder:"请选择"},{default:o(()=>[(m(!0),M($,null,I(h.value,c=>(m(),P(w,{key:c.id,label:c.pbTypeName,value:c.pbTypeName},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1}),t(O,{label:"检测项目",name:"detectProject"},{default:o(()=>[t(X,{value:i.detectProject,"onUpdate:value":a[1]||(a[1]=c=>i.detectProject=c),"show-search":"",style:{width:"220px"},allowClear:"",placeholder:"请选择"},{default:o(()=>[(m(!0),M($,null,I(h.value,c=>(m(),P(w,{key:c.id,label:c.detectProject,value:c.detectProject},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1}),t(O,{label:"货号",name:"productNumber"},{default:o(()=>[t(X,{value:i.productNumber,"onUpdate:value":a[2]||(a[2]=c=>i.productNumber=c),"show-search":"",style:{width:"220px"},allowClear:"",placeholder:"请选择"},{default:o(()=>[(m(!0),M($,null,I(h.value,c=>(m(),P(w,{key:c.id,label:c.productNumber,value:c.productNumber},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1}),t(O,{label:"录入时间"},{default:o(()=>[C("div",Me,[t(ee,{style:{width:"220px"},valueFormat:"YYYY-MM-DD",value:i.startTime,"onUpdate:value":a[3]||(a[3]=c=>i.startTime=c)},null,8,["value"])])]),_:1}),a[6]||(a[6]=C("span",null,"-",-1)),t(O,null,{default:o(()=>[C("div",Pe,[t(ee,{style:{width:"220px"},valueFormat:"YYYY-MM-DD",value:i.endTime,"onUpdate:value":a[4]||(a[4]=c=>i.endTime=c)},null,8,["value"])])]),_:1})]),_:1},8,["model"]),C("div",Re,[C("div",je,[t(B,{class:"table_search_button",type:"primary",onClick:U},{default:o(()=>a[7]||(a[7]=[k("查询")])),_:1}),t(B,{class:"table_search_clean_button",type:"primary",onClick:q},{default:o(()=>a[8]||(a[8]=[k("清除")])),_:1}),t(B,{class:"table_search_export_button",type:"primary",onClick:ne},{default:o(()=>a[9]||(a[9]=[k("导出信息")])),_:1})]),C("div",Ue,[t(B,{class:"table_action_add",type:"primary",onClick:a[5]||(a[5]=c=>{var H;return(H=y.value)==null?void 0:H.begin()})},{default:o(()=>a[10]||(a[10]=[k("增加产品批次")])),_:1})])])]),C("div",Ie,[C("div",$e,[t(z(me))]),a[11]||(a[11]=C("div",{class:"table_title_text"},"菜单名称",-1))]),t(de,{"row-selection":le.value,columns:D,"data-source":h.value,pagination:z(se)(b.value),rowKey:c=>c.id,onChange:ue},{bodyCell:o(({column:c,record:H})=>[c.dataIndex==="action"?(m(),M("div",Be,[t(B,{class:"action_button",type:"primary",ghost:"",onClick:G=>{var S;return(S=R.value)==null?void 0:S.begin(H)}},{default:o(()=>a[12]||(a[12]=[k("修改")])),_:2},1032,["onClick"]),t(B,{class:"action_button",type:"primary",ghost:"",danger:"",onClick:G=>_(H.id)},{default:o(()=>a[13]||(a[13]=[k(" 删除 ")])),_:2},1032,["onClick"])])):Q("",!0),c.dataIndex==="productIntroduction"?(m(),M("div",Se,[t(B,{class:"no-border-button",type:"primary",ghost:"",onClick:G=>{var S;return(S=N.value)==null?void 0:S.begin(H.productIntroduction)}},{default:o(()=>a[14]||(a[14]=[k(" 详情 ")])),_:2},1032,["onClick"])])):Q("",!0),c.dataIndex==="batchCode"?(m(),M("div",ze,[t(B,{class:"no-border-button",type:"primary",ghost:"",onClick:G=>{var S;return(S=T.value)==null?void 0:S.begin(H)}},{default:o(()=>a[15]||(a[15]=[k(" 详情 ")])),_:2},1032,["onClick"])])):Q("",!0)]),_:1},8,["row-selection","data-source","pagination","rowKey"]),t(ye,{ref_key:"updateRef",ref:R,onSave:n},null,512),t(ge,{ref_key:"addRef",ref:y,onSave:l},null,512),t(Ne,{ref_key:"detailRef",ref:N,onSave:f},null,512),t(ke,{ref_key:"bacthCodeRef",ref:T,onSave:x},null,512)])}}}),Ae=L(De,[["__scopeId","data-v-4d8a7c23"]]);export{Ae as default};
