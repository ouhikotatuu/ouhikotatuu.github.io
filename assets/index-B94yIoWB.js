import{u as P,e as X}from"./exportToExcel-BUpgOtO1.js";import{d as $,a as f,r as I,p as E,b as l,c as A,q as U,w as a,g as n,l as p,M as O,z as B,o as G,A as J,e as L,f as _,x as H,C as Q,j as W,B as K,_ as Z}from"./index-DHTjKAgc.js";import{l as h,U as ee}from"./subSystem-CEcU_uw-.js";const te=$({__name:"SubSystemMangeUpdate",emits:["save"],setup(D,{expose:o,emit:x}){const r=f(!1),s=I({id:"",remark:""}),v=f(null),m=x;o({begin:i=>{s.id=i.id,s.remark=i.remark,E(()=>{r.value=!0})},end:()=>{r.value=!1}});const k=()=>{O.confirm({title:"确定取消",content:"是否确定取消操作？",okText:"确定",cancelText:"取消",onOk:()=>{r.value=!1}})},g=async()=>{var i;await((i=v.value)==null?void 0:i.validate()),m("save",s)};return(i,d)=>{const C=l("a-input"),S=l("a-form-item"),T=l("a-form"),y=l("a-button"),b=l("a-modal");return A(),U(b,{open:r.value,"onUpdate:open":d[1]||(d[1]=w=>r.value=w),title:"备注修改"},{footer:a(()=>[n(y,{onClick:k},{default:a(()=>d[2]||(d[2]=[p("取消")])),_:1}),n(y,{type:"primary",onClick:g},{default:a(()=>d[3]||(d[3]=[p("保存")])),_:1})]),default:a(()=>[n(T,{model:s},{default:a(()=>[n(S,{label:"备注修改"},{default:a(()=>[n(C,{value:s.remark,"onUpdate:value":d[0]||(d[0]=w=>s.remark=w),valueModifiers:{trim:!0}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),ne=$({__name:"SubSystemMangeAdmin",emits:["save"],setup(D,{expose:o,emit:x}){const r=f(!1),s=I({subSystemAdmin:""}),v=f(null),m=x;o({begin:g=>{s.subSystemAdmin=g,E(()=>{r.value=!0})},end:()=>r.value=!1});const k=()=>{m("save",s)};return(g,i)=>{const d=l("a-input"),C=l("a-form-item"),S=l("a-form"),T=l("a-button"),y=l("a-modal");return A(),U(y,{open:r.value,"onUpdate:open":i[1]||(i[1]=b=>r.value=b),title:"管理员查看"},{footer:a(()=>[n(T,{type:"primary",onClick:k},{default:a(()=>i[2]||(i[2]=[p("确定")])),_:1})]),default:a(()=>[n(S,{model:s,ref_key:"formRef",ref:v},{default:a(()=>[n(C,{label:"管理员"},{default:a(()=>[n(d,{value:s.subSystemAdmin,"onUpdate:value":i[0]||(i[0]=b=>s.subSystemAdmin=b),readonly:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),ae={class:"product_zi_page"},oe={class:"table_form_view"},se={class:"yunyin_form_date"},le={class:"table_action_view"},ie={class:"table_search_handler"},re={class:"table_title"},de={class:"table_title_icon"},ue=$({__name:"index",setup(D){const o=I({current:1,size:9,subSystemType:"",startTime:"",endTime:""}),x=B([]),r=B(0),s=f(null),v=f(null);G(async()=>{m()});const m=async()=>{const t=await h(o);x.value=t.records,r.value||(r.value=t.total||0)},k=[{title:"序号",customRender:({text:t,record:e,index:c})=>`${c+1}`,align:"center"},{title:"系统名称",customRender:({text:t,record:e,index:c})=>`${e.ssName}`,dataIndex:"ssName",align:"center"},{title:"系统类别",customRender:({text:t,record:e,index:c})=>`${e.ssType}`,dataIndex:"ssType",align:"center"},{title:"运营时间",customRender:({text:t,record:e,index:c})=>`${e.startTime}`,dataIndex:"startTime",align:"center"},{title:"管理员",customRender:({text:t,record:e,index:c})=>`${e.subSystemAdmin}`,dataIndex:"subSystemAdmin",align:"center"},{title:"备注",customRender:({text:t,record:e,index:c})=>`${e.remark}`,dataIndex:"remark",align:"center"},{title:"操作",dataIndex:"action",align:"center"}],g=async t=>{var e;await ee(t),(e=s.value)==null||e.end(),m(),W.success("修改成功")},i=()=>{var t;(t=v.value)==null||t.end()},d=()=>{o.subSystemType="",o.startTime=null,o.endTime=null,m()},C=()=>{m()},S=()=>{const t=["操作","序号"];return[...k.filter(e=>!t.includes(e.title))]},T=f([]),y=f([]),b=J(()=>({selectedRowKeys:T.value,onChange:(t,e)=>{T.value=t,y.value=e}})),w=()=>{O.confirm({title:"确定导出选中数据吗？",content:"导出后无法修改，请确认是否导出？",okText:"确定",cancelText:"取消",onOk:()=>{X(y.value.map((t,e)=>({...t,sn:e})),S(),"selectedData.xlsx")}})},V=t=>{o.current=t.current,o.size=t.pageSize,m()};return(t,e)=>{const c=l("a-input"),Y=l("a-form-item"),N=l("a-date-picker"),q=l("a-form"),R=l("a-button"),F=l("a-table");return A(),L("div",ae,[_("div",oe,[n(q,{class:"search_form",layout:"inline",autocomplete:"off",model:o},{default:a(()=>[n(Y,{label:"系统类别"},{default:a(()=>[n(c,{value:o.subSystemType,"onUpdate:value":e[0]||(e[0]=u=>o.subSystemType=u),placeholder:"请输入系统类别"},null,8,["value"])]),_:1}),n(Y,{label:"运营时间"},{default:a(()=>[_("div",se,[n(N,{style:{width:"220px"},value:o.startTime,"onUpdate:value":e[1]||(e[1]=u=>o.startTime=u),valueFormat:"YYYY-MM-DD"},null,8,["value"]),e[3]||(e[3]=_("span",null,"-",-1)),n(N,{style:{width:"220px"},value:o.endTime,"onUpdate:value":e[2]||(e[2]=u=>o.endTime=u),valueFormat:"YYYY-MM-DD"},null,8,["value"])])]),_:1})]),_:1},8,["model"]),_("div",le,[_("div",ie,[n(R,{class:"table_search_button",type:"primary",onClick:C},{default:a(()=>e[4]||(e[4]=[p("查询")])),_:1}),n(R,{class:"table_search_clean_button",onClick:d,type:"primary"},{default:a(()=>e[5]||(e[5]=[p("清除")])),_:1}),n(R,{class:"table_search_button",type:"primary",onClick:w},{default:a(()=>e[6]||(e[6]=[p("导出 Excel")])),_:1})])])]),_("div",re,[_("div",de,[n(H(Q))]),e[7]||(e[7]=_("div",{class:"table_title_text"},"菜单名称",-1))]),n(F,{columns:k,"data-source":x.value,pagination:H(P)(r.value),"row-selection":b.value,rowKey:u=>u.id,onChange:V},{bodyCell:a(({column:u,record:z})=>[u.dataIndex==="action"?(A(),U(R,{key:0,class:"no-border-button",type:"primary",ghost:"",onClick:j=>{var M;return(M=s.value)==null?void 0:M.begin(z)}},{default:a(()=>e[8]||(e[8]=[p(" 修改 ")])),_:2},1032,["onClick"])):K("",!0),u.dataIndex==="subSystemAdmin"?(A(),U(R,{key:1,class:"no-border-button",type:"primary",ghost:"",onClick:j=>{var M;return(M=v.value)==null?void 0:M.begin(z.subSystemAdmin)}},{default:a(()=>e[9]||(e[9]=[p("管理员")])),_:2},1032,["onClick"])):K("",!0)]),_:1},8,["data-source","pagination","row-selection","rowKey"]),n(te,{ref_key:"updateRef",ref:s,onSave:g},null,512),n(ne,{ref_key:"adminRef",ref:v,onSave:i},null,512)])}}}),pe=Z(ue,[["__scopeId","data-v-2d7a0712"]]);export{pe as default};
