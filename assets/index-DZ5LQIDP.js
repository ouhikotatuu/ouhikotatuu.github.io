import{s as D,g as E}from"./index-XXkNLdLx.js";import{d as U,r as l,q as F,o as L,b as s,c as n,f as u,w as v,e as w,h as f,F as T,A as V,E as z,t as c,s as h,_ as B}from"./index-DDqPfp3K.js";const R={class:"shelves-page"},S={key:0,class:"tabs"},$=["onClick"],O={key:1},X={class:"table"},q={key:0},J={key:1},Q={key:0},j={key:1},G={key:0},H={key:1},K={key:2},W={key:3},Y={key:4},Z=U({__name:"index",setup(ee){const d=l({supplierName:null,standardProductId:null});l(null);const _=l([]),g=l([]);l([]);const x=[{title:"标品名称",dataIndex:"spName",align:"center",width:150,fixed:"left"},{title:"供应商名称",dataIndex:"supplierName",align:"center",width:150,fixed:"left"},{title:"设备型录名称",dataIndex:"name",align:"center",width:150,fixed:"left"},{title:"设备型录型号",dataIndex:"model",align:"center",width:150,fixed:"left"},{title:"总价（万元）",dataIndex:"totalPrice",align:"center",width:150,fixed:"left"}],p=l(x);l({showQuickJumper:!0,showSizeChanger:!0,hideOnSinglePage:!1,responsive:!0,showTotal:null,size:"large",total:0});const y=e=>{d.value.standardProductId=e},M=(e,i)=>{e.target.value=e.target.value.replace(/\s+/g,""),d.value[i]=e.target.value},k=e=>{var i;x.forEach(r=>{r.fixed=e!=null&&e.characteristics||e!=null&&e.child?"left":""}),p.value=[...x],!(!(e!=null&&e.characteristics)&&!(e!=null&&e.child))&&(e.characteristics.forEach((r,o)=>{p.value.push({title:`${r.standardProductCharacteristic.name}(${r.standardProductCharacteristic.unit})`,dataIndex:"characteristics",index:o,align:"center",width:150})}),(i=e==null?void 0:e.child)==null||i.forEach((r,o)=>{r.standardProduct.disabled||p.value.push({title:r.standardProduct.name,dataIndex:r.child,children:[{title:"单价（万元）",align:"center",index:o,width:150},{title:"数量",align:"center",index:o,width:150},{title:"合计（万元）",align:"center",index:o,width:150}]})}))},m=l(!1),P=async()=>{m.value=!0,await E(d.value).then(e=>{g.value=e.map(i=>(i.child=i.children,delete i.children,i)),k(g.value[0]),m.value=!1})};return F(()=>d.value,e=>{P()},{deep:!0}),L(async()=>{var i;const e=await D();_.value=e.records,e.records[0]&&(d.value.standardProductId=(i=e.records[0])==null?void 0:i.id)}),(e,i)=>{const r=f("a-form-item"),o=f("a-input"),b=f("a-form"),N=f("a-table");return s(),n("div",R,[u(b,{class:"search_form",autocomplete:"off"},{default:v(()=>[u(r,{label:"标品筛选："},{default:v(()=>[_.value.length>0?(s(),n("div",S,[(s(!0),n(T,null,V(_.value,a=>(s(),n("div",{key:a.key,class:z(["tab",{tab_active:d.value.standardProductId===a.id}]),onClick:t=>y(a.id)},c(a.name),11,$))),128))])):(s(),n("div",O,"暂无数据"))]),_:1}),u(r,{label:"供应商名称："},{default:v(()=>[u(o,{style:{width:"200px"},value:d.value.supplierName,"onUpdate:value":i[0]||(i[0]=a=>d.value.supplierName=a),valueModifiers:{trim:!0},placeholder:"请输入供应商名称",onChange:i[1]||(i[1]=a=>M(a,"supplierName")),allowClear:""},null,8,["value"])]),_:1})]),_:1}),w("div",X,[u(N,{columns:p.value,"data-source":g.value,scroll:{x:"max-content",scrollToFirstRowOnChange:!0},pagination:!1,onChange:e.tableChangePage,loading:m.value},{bodyCell:v(({record:a,column:t,index:C})=>{var I;return[(t==null?void 0:t.title)==="标品名称"?(s(),n("div",q,c((I=_.value.find(A=>A.id===d.value.standardProductId))==null?void 0:I.name),1)):h("",!0),(t==null?void 0:t.dataIndex)==="characteristics"?(s(),n("div",J,[w("span",null,[a.characteristics[t.index].standardProductCharacteristic.expectation==="CRITERIA"?(s(),n("span",Q,c(a.characteristics[t.index].rangeMinimum?typeof a.characteristics[t.index].rangeMinimum=="number"?"接受":"拒绝":"-"),1)):(s(),n("span",j,c(a.characteristics[t.index].rangeMinimum??"-"),1))]),a.characteristics[t.index].standardProductCharacteristic.type==="MAXIMUM_AND_MINIMUM"&&a.characteristics[C].rangeMaximum?(s(),n("span",G," - ")):h("",!0),a.characteristics[t.index].standardProductCharacteristic.type==="MAXIMUM_AND_MINIMUM"&&a.characteristics[C].rangeMaximum?(s(),n("span",H,c(a.characteristics[C].rangeMaximum),1)):h("",!0)])):h("",!0),(t==null?void 0:t.title)==="单价（万元）"?(s(),n("div",K,c(a.child[t.index].price??"-"),1)):h("",!0),(t==null?void 0:t.title)==="数量"?(s(),n("div",W,c(a.child[t.index].amount??"-"),1)):h("",!0),(t==null?void 0:t.title)==="合计（万元）"?(s(),n("div",Y,c(a.child[t.index].totalPrice??"-"),1)):h("",!0)]}),_:1},8,["columns","data-source","onChange","loading"])])])}}}),ie=B(Z,[["__scopeId","data-v-8a788e35"]]);export{ie as default};
