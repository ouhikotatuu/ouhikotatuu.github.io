import{d as h,u as d,r as _,o as u,a as i,b as r,c as f,e as m,f as e,g as x,w as g,h as y,i as w,p as k,j as v,_ as S}from"./index-DGHf1od0.js";const l=o=>(k("data-v-c5e65953"),o=o(),v(),o),C={class:"login-container"},I={class:"content"},A=l(()=>e("div",{class:"login_title"},"辰宿供应链管理平台",-1)),b=l(()=>e("div",{class:"Var"},[e("div",{class:"copyright-pc copyright"},[e("a",{href:"http://www.hsd.eco/",target:"_blank",style:{color:"#93a4b0"}},"沪ICP  备17044574号-1  Copyright  @2022 版权所有：源网荷储新能源科技（上海）有限公司")])],-1)),N=h({__name:"index",setup(o){d(),_({code:null,state:null});const p=async()=>{const a=window.location.href.split("#")[0];r.get(`https://chenxiu.app.ywhcxny.cn/oauth2/authorize?redirectUri=${a}`).then(t=>{alert(JSON.stringify(t)),window.location.replace(t.data.authorizeUri)})};return u(async()=>{var s;localStorage.getItem("xAuthToken")&&i.replace("/home");const a=(s=window.location.href.split("#")[0].split("?")[1])==null?void 0:s.split("&"),t={};Array.from(a).forEach(c=>{const n=c.split("=");t[n[0]]=n[1]}),alert(JSON.stringify(t)),r.post("https://chenxiu.app.ywhcxny.cn/oauth2/token",t).then(c=>{c.data.xAuthToken&&(localStorage.setItem("xAuthToken",c.data.xAuthToken),i.replace("/home"))})}),(a,t)=>{const s=y("a-button");return f(),m("div",C,[e("div",I,[A,x(s,{onClick:p,type:"primary",class:"loginButton"},{default:g(()=>[w("授权登录")]),_:1})]),b])}}}),B=S(N,[["__scopeId","data-v-c5e65953"]]);export{B as default};
